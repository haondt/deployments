# can arbitrarily change things here
metadata: # applied to all resources in app
#   labels:
#     ...
#     deployment.haondt.dev/managed-by: haondt-docker-deployer # will be added by pipeline
#     app.kubernetes.io/managed-by: haondt-docker-deployer # will be added by pipeline
    # deployment.haondt.dev/name: taken from config.haondt.yml
  annotations:
    deployment.haondt.dev/repository: https://gitlab.com/haondt/deployments
#     ...
#     deployment.haondt.dev/timestamp: "${TIMESTAMP}" # will be added by pipeline
#     deployment.haondt.dev/commit: "${CI_COMMIT_SHA}"
#     deployment.haondt.dev/pipeline: "${CI_PIPELINE_ID}"
defaults:
  pvc:
    storage_class: longhorn-default
    size: 10Gi
  images:
    startup_tasks_chown: busybox:1.37
    charon_k8s_job: registry.gitlab.com/haondt/cicd/registry/charon-k8s-job:main-1496972a
  charon:
    overlays:
      daily:
        schedule: "0 0 * * *"
      default-gcs:
        name: default
        scale_down_deployment: true
        repository_configs:
          - config_map:
              namespace: charon
              name: repository-default
              key: repository
          - config_map:
              namespace: charon
              name: repository-gcs-gabbro
              key: repository
          - secret:
              namespace: charon
              name: repository-default
              key: repository
        volumes:
          - secret:
              namespace: charon
              name: repository-gcs-gabbro
              key: credentials.json
            dest.file: /config/gcs/credentials.json
      default-hzsb:
        name: default
        scale_down_deployment: true
        repository_configs:
          - config_map:
              namespace: charon
              name: repository-default
              key: repository
          - config_map:
              namespace: charon
              name: repository-hzsb
              key: repository
          - secret:
              namespace: charon
              name: repository-hzsb
              key: repository
