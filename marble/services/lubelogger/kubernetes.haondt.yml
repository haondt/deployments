components:
  primary:
    # image: ghcr.io/hargata/lubelogger:latest@sha256:619536a35b31d33a34c520025b6a4e45d98819910f46eb22396a18b3502dd0b3
    image: alpine
    command: [sh,-c,"tail -f /dev/null"]
    talos: +!
    networking:
      ports:
        http: 8080
      ingresses:
        - port: http
          host: "lubelogger.{{ haondt__default_host }}"
    volumes:
      data:
        src.pvc.size: 128Mi
        dest.dir: /App/data
      keys:
        src.pvc.size: 128Mi
        dest.dir: /root/.aspnet/DataProtection-Keys
    charon:
      - overlays: [default-hzsb, weekly]
        repository_configs:
          - raw: |-
              backend:
                path: deployments-lubelogger
        source.volumes:
          data: [/]
          keys: [/]
