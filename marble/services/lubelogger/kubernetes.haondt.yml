components:
  primary:
    image: ghcr.io/hargata/lubelogger:latest@sha256:c4277e12e005af6a3a95f3c32ce2aac6fbb035cb74e58d5f8d3cac4c27307eaf
    talos: +!
    networking:
      ports:
        http: 8080
      gateway.http_routes:
        - port: http
          host: "lubelogger.{{ haondt__default_host }}"
    volumes:
      data:
        src.pvc.size: 128Mi
        dest.dir: /App/data
      keys:
        src.pvc.size: 128Mi
        dest.dir: /root/.aspnet/DataProtection-Keys
    charon:
      overlays: [weekly]
      backups:
        - overlays: [default-hzsb]
          repository_configs:
            - raw: |-
                backend:
                  path: deployments-lubelogger
          source.volumes:
            data: [/]
            keys: [/]
