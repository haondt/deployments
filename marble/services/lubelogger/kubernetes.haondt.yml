components:
  primary:
    image: ghcr.io/hargata/lubelogger:latest@sha256:4b3baa2a03bcccb9c1c296556a92a7f5644dc92bd732f8c9d9f957c729b631b1
    talos: +!
    networking:
      ports:
        http: 8080
      ingresses:
        - port: http
          host: "lubelogger.{{ haondt__default_host }}"
    volumes:
      data:
        src.pvc.size: 128Mi
        dest.dir: /App/data
      keys:
        src.pvc.size: 128Mi
        dest.dir: /root/.aspnet/DataProtection-Keys
    charon:
      - overlays: [default-hzsb, weekly]
        repository_configs:
          - raw: |-
              backend:
                path: deployments-lubelogger
        source.volumes:
          data: [/]
          keys: [/]
