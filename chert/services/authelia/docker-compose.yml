services:
  authelia:
    image: authelia/authelia:4.38
    volumes:
      - /srv/data/authelia:/config
      - ./authelia/config.yml:/config/configuration.yml
    networks:
      - authelia
    environment:
      VIRTUAL_HOST: "auth.haondt.dev"
      VIRTUAL_PORT: 443
      HTTPS_METHOD: nohttp
      LETSENCRYPT_HOST: "auth.haondt.dev"

  lldap:
    image: lldap/lldap:stable
    networks:
      - wireguard
      - authelia
    volumes:
      - /srv/data/lldap:/data
    environment:
      LLDAP_JWT_SECRET:  "{{ lldap__jwt_secret }}"
      LLDAP_KEY_SEED: "{{ lldap__key_seed }}"
      LLDAP_LDAP_BASE_DN: dc=haondt,dc=dev

networks:
  authelia:


