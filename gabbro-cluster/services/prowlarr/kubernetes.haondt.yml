components:
  primary:
    image: lscr.io/linuxserver/prowlarr:develop@sha256:6972ea29955d3022d1189b696a00fa7311050db85e6ac8dd58afb1b5a2552c79
    talos: +!
    resources.limits.memory: 512Mi
    networking:
      ports:
        http: 9696
      ingresses:
        - port: http
          host: "prowlarr.{{ haondt__default_host }}"
          tls.host: "*.{{ haondt__default_host }}"
      dependencies:
        - name: primary
          app: sonarr
          port: http
        - name: primary
          app: radarr
          port: http
        - name: hd
          app: radarr
          port: http
    volumes:
      config:
        src.pvc: {}
        dest.dir: /config
    startup:
      tasks:
        - chown:
            paths: [/config]
            owner: "{{ media__puid }}:{{ media__pgid }}"
    environment:
      - raw:
          PGID: "{{ media__pgid }}"
          PUID: "{{ media__puid }}"
